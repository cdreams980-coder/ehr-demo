<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EHR Demo</title>

  <style>
    body { font-family: system-ui, -apple-system, sans-serif; margin: 24px; }
    header { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #ddd; padding-bottom:10px; }
    .grid { display:grid; grid-template-columns:repeat(3, 1fr); gap:16px; margin-top:20px; }
    .card { border:1px solid #ccc; border-radius:8px; padding:12px; min-height:140px; }
  </style>
</head>

<body>
  <header>
    <h3>EHR Overview (Demo)</h3>
    <button id="logout">Sign Out</button>
  </header>

  <p id="user"></p>

  <div class="grid">
    <div class="card">Active Problems</div>
    <div class="card">Hospital Course</div>
    <div class="card">Vitals</div>
    <div class="card">Medications</div>
    <div class="card">Labs</div>
    <div class="card">Imaging / Discharge</div>
  </div>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const SUPABASE_URL = "https://bnoamxkmrfzvlzdaquun.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJub2FteGttcmZ6dmx6ZGFxdXVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAyMTUxMzgsImV4cCI6MjA4NTc5MTEzOH0.y2-BYBvv1OSnABLUwmYhLPseXYMvoT4UAzjJgSgfAjY";

    const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

    const { data: { session } } = await supabase.auth.getSession();

    if (!session) {
      window.location = "index.html";
    } else {
      document.getElementById("user").textContent = "Signed in as: " + session.user.email;
    }

    document.getElementById("logout").onclick = async () => {
      await supabase.auth.signOut();
      window.location = "index.html";
    };
  </script>
</body>
</html>
